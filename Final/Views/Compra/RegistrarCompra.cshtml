@model Final.ViewModels.CompraViewModel
@{
    ViewData["Title"] = "Registrar compra";
}

<div class="container-lg col-4">
    <h1>Registrar Compra</h1>
    <form asp-action="RegistrarCompra" method="POST">

        <div class="DatosFijos">
        <!-- Usuario -->
        <div class="input-group mb-3">
            <label asp-for="IdUsuario" class="input-group-text">usuario</label>
            <select asp-for="IdUsuario" class="form-control" id="usuario">
                <option value="">Seleccione el usuario</option>
                @foreach (var usuario in ViewBag.Usuarios)
                {
                    <option value="@usuario.Id">@usuario.Nombre</option>
                }
            </select>
        </div>

        <!-- Proveedor -->
        <div class="input-group mb-3">
            <label asp-for="IdProveedor" class="input-group-text">Proveedor</label>
            <select asp-for="IdProveedor" class="form-control" id="proveedor">
                <option value="">Seleccione el proveedor</option>
                @foreach (var proveedor in ViewBag.Proveedores)
                {
                    <option value="@proveedor.Id">@proveedor.Nombre</option>
                }
            </select>
        </div>
        </div>

        <div class="DatosDinamicos">
        <!-- Categoria -->
        <div class="input-group mb-3">
            <label asp-for="IdCategoria" class="input-group-text">Categoria</label>
            <select asp-for="IdCategoria" class="form-control" id="categoria" onchange="filtrarProductos()">
                <option value="">Seleccione la categoria</option>
                @foreach (var categoria in ViewBag.Categorias)
                {
                    <option value="@categoria.Id">@categoria.Nombre</option>
                }
            </select>
        </div>

        <!-- marca -->
        <div class="input-group mb-3">
            <label asp-for="IdMarca" class="input-group-text">Marca</label>
            <select asp-for="IdMarca" class="form-control" id="marca" onchange="filtrarProductos()">
                <option value="">Seleccione la marca</option>
                @foreach (var marca in ViewBag.Marcas)
                {
                    <option value="@marca.Id">@marca.Nombre</option>
                }
            </select>
        </div>

        <!-- Producto -->
        <div class="input-group mb-3">
            <label asp-for="IdProducto" class="input-group-text">Producto</label>
            <select asp-for="IdProducto" class="form-control" id="producto">
                <option value="">Seleccione el producto</option>
                @foreach (var producto in ViewBag.Productos)
                {
                    <option value="@producto.Id">@producto.Nombre</option>
                }
            </select>
        </div>

        <!-- Precio de Compra -->
        <div class="input-group mb-3">
            <label asp-for="PrecioCompra" class="input-group-text">Precio unitario</label>
            <input asp-for="PrecioCompra" type="text" class="form-control" placeholder="Ingrese el precio de compra" id="precioCompra">
        </div>

        <!-- Cantidad -->
        <div class="input-group mb-3">
            <label asp-for="Cantidad" class="input-group-text">Cantidad</label>
            <input asp-for="Cantidad" type="text" class="form-control" placeholder="Ingrese la cantidad" id="cantidad">
        </div>
        </div>

        <!-- Fecha -->
        <div class="input-group mb-3">
            <label asp-for="Fecha" class="input-group-text">Fecha</label>
            <input asp-for="Fecha" type="datetime" class="form-control" id="fechaAlta" value="@DateTime.Now" readonly>
        </div>

        <br>

        <button id="agregarProducto" type="button" class="btn btn-primary" onclick="agregarProducto()">Agregar producto</button>
        <br />
        <button type="submit" class="btn btn-primary">Guardar</button>
    </form>

    <!-- Tabla para mostrar los productos agregados -->
    <table class="table" id="tablaProductos">
        <thead>
            <tr>
                <th>Producto</th>
                <th>Precio unitario</th>
                <th>Cantidad</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            <!-- Aquí se agregarán las filas dinámicamente -->
        </tbody>
    </table>
</div>


<script src="~/js/Producto/Producto.js"></script>